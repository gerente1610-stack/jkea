<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JKA INMOBILIARIA | Seguridad Jurídica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; scroll-behavior: smooth; background-color: #0f172a; color: #e2e8f0; }
        .glass { background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(12px); }
        .hero-gradient { background: radial-gradient(circle at top right, #1e3a8a 0%, #0f172a 60%); }
        .house-card { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); border: 1px solid rgba(255,255,255,0.05); }
        .house-card:hover { transform: translateY(-12px); border-color: #3b82f6; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }
        .badge-info { background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2); color: #93c5fd; font-size: 10px; padding: 4px 10px; border-radius: 8px; font-weight: 600; text-transform: uppercase; }
        .card-dark { background: #1e293b; border: 1px solid rgba(255,255,255,0.05); }
        .line-clamp-4 { display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; overflow: hidden; }
    </style>
</head>
<body>

    <a href="https://wa.me/528115041788?text=Hola%20vengo%20de%20la%20página%20web%20JKA%20INMOBILIARIA" target="_blank" class="fixed bottom-6 right-6 z-[100] bg-[#25D366] p-4 rounded-full shadow-2xl hover:scale-110 transition-transform">
        <i class="fa-brands fa-whatsapp text-3xl text-white"></i>
    </a>

    <nav class="sticky top-0 z-50 glass border-b border-slate-800 p-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center font-black text-white italic shadow-lg">JK</div>
                <h1 class="text-xl font-extrabold tracking-tighter text-white uppercase">JKA <span class="text-blue-500 font-light italic">INMOBILIARIA</span></h1>
            </div>
            <div class="flex items-center gap-6 text-[11px] font-bold text-slate-400">
                <a href="#nosotros" class="hover:text-blue-400 transition uppercase tracking-widest text-blue-400">¿Por qué JKA?</a>
                <a href="#catalogo" class="hover:text-blue-400 transition uppercase tracking-widest">Propiedades</a>
                <button onclick="revealAdmin()" class="bg-slate-800 px-3 py-1.5 rounded-lg border border-slate-700 hover:bg-slate-700 transition text-[9px]">ADMIN</button>
            </div>
        </div>
    </nav>

    <section class="relative min-h-[60vh] flex items-center justify-center text-center px-6 hero-gradient">
        <div class="max-w-4xl z-10">
            <span class="inline-block px-4 py-1 mb-6 text-[10px] font-bold tracking-[0.3em] text-blue-400 uppercase bg-blue-400/10 border border-blue-400/20 rounded-full italic">Protección Patrimonial</span>
            <h2 class="text-5xl md:text-8xl font-extrabold text-white mb-6 uppercase tracking-tighter italic">Inversión <br><span class="text-blue-500 font-light italic">Inteligente.</span></h2>
            <p class="text-lg text-slate-400 mb-10 max-w-2xl mx-auto italic leading-relaxed">"No solo buscamos una casa, aseguramos que tu patrimonio crezca sobre cimientos legales sólidos."</p>
            <div class="flex flex-col md:flex-row gap-4 justify-center">
                <a href="#catalogo" class="bg-blue-600 hover:bg-blue-700 text-white px-10 py-4 rounded-2xl font-bold transition shadow-xl text-sm uppercase tracking-widest">Ver Catálogo Seguro</a>
                <a href="#nosotros" class="bg-slate-800 hover:bg-slate-700 text-white px-10 py-4 rounded-2xl font-bold transition text-sm uppercase tracking-widest border border-slate-700">Conócenos</a>
            </div>
        </div>
    </section>

    <section class="py-24 px-6 bg-[#0f172a]">
        <div class="max-w-7xl mx-auto grid md:grid-cols-3 gap-8">
            <div class="card-dark p-10 rounded-[2.5rem] border-l-4 border-l-red-500 shadow-xl">
                <i class="fa-solid fa-ban text-red-500 text-2xl mb-4"></i>
                <h4 class="text-white font-black uppercase text-sm mb-4 italic">Sin Traspasos Opacos</h4>
                <p class="text-slate-400 text-xs leading-relaxed italic">Evita el riesgo de perder tu dinero en propiedades con estatus legal dudoso.</p>
            </div>
            <div class="bg-blue-600 p-10 rounded-[2.5rem] shadow-2xl scale-105">
                <i class="fa-solid fa-check-double text-white text-3xl mb-4"></i>
                <h4 class="text-white font-black uppercase text-sm mb-4 text-center">Garantía Jurídica</h4>
                <p class="text-white/90 text-xs leading-relaxed italic font-semibold text-center">Propiedades filtradas legalmente. Si está aquí, es una compra segura.</p>
            </div>
            <div class="card-dark p-10 rounded-[2.5rem] border-r-4 border-r-blue-500 shadow-xl">
                <i class="fa-solid fa-user-shield text-blue-500 text-2xl mb-4"></i>
                <h4 class="text-white font-black uppercase text-sm mb-4 italic">Acompañamiento</h4>
                <p class="text-slate-400 text-xs leading-relaxed italic">Te llevamos de la mano hasta la firma ante notario público.</p>
            </div>
        </div>
    </section>

    <section id="nosotros" class="py-24 px-6 bg-[#0c1222] border-y border-slate-800">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center gap-16">
            <div class="md:w-1/2">
                <div class="relative">
                    <img src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?auto=format&fit=crop&q=80&w=800" class="rounded-[3rem] shadow-2xl border border-slate-700" alt="JKA Inmobiliaria">
                </div>
            </div>
            <div class="md:w-1/2 text-left">
                <h2 class="text-4xl font-black text-white uppercase italic mb-6 leading-tight">Expertos en hacer las cosas <span class="text-blue-500">bien.</span></h2>
                <p class="text-slate-400 text-lg italic leading-relaxed mb-6">
                    En <strong>JKA Inmobiliaria</strong>, eliminamos el estrés de la compraventa. Nos especializamos en propiedades con <strong>seguridad jurídica total</strong>.
                </p>
                <div class="grid grid-cols-2 gap-6">
                    <div>
                        <p class="text-white font-black text-2xl italic">100%</p>
                        <p class="text-blue-500 text-[10px] font-bold uppercase tracking-widest">Transparencia</p>
                    </div>
                    <div>
                        <p class="text-white font-black text-2xl italic">Seguro</p>
                        <p class="text-blue-500 text-[10px] font-bold uppercase tracking-widest">Patrimonio</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="catalogo" class="py-24 bg-[#0f172a]">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <h2 class="text-4xl font-black text-white mb-2 uppercase tracking-tight italic">Nuestras Propiedades</h2>
            <p class="text-slate-500 text-[10px] uppercase tracking-[0.4em] mb-16 italic font-bold">Verificadas y listas para venta</p>
            
            <div id="adminPanel" class="hidden max-w-4xl mx-auto mb-20 p-8 bg-slate-900 border-2 border-blue-600/40 rounded-[2.5rem] shadow-2xl">
                <h3 class="text-white font-black mb-6 uppercase italic text-sm">Registrar Nueva Propiedad</h3>
                <form id="houseForm" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-left">
                    <input type="text" id="imgInp" placeholder="Link de Foto (URL)" class="md:col-span-2 p-4 bg-slate-800 rounded-xl border border-slate-700 text-white" required>
                    <input type="text" id="streetInp" placeholder="Calle y Número" class="p-4 bg-slate-800 rounded-xl border border-slate-700 text-white" required>
                    <input type="text" id="colInp" placeholder="Colonia" class="p-4 bg-slate-800 rounded-xl border border-slate-700 text-white" required>
                    <input type="text" id="munInp" placeholder="Municipio" class="p-4 bg-slate-800 rounded-xl border border-slate-700 text-white" required>
                    <input type="text" id="estInp" placeholder="Estado" class="p-4 bg-slate-800 rounded-xl border border-slate-700 text-white" required>
                    <input type="text" id="priceInp" placeholder="Precio (Sólo números)" class="p-4 bg-slate-800 rounded-xl border border-slate-700 text-white" required>
                    <input type="text" id="avaInp" placeholder="Valor de Avalúo" class="p-4 bg-slate-800 rounded-xl border border-slate-700 text-white">
                    <input type="text" id="carInp" placeholder="Tipo de Carta" class="p-4 bg-slate-800 rounded-xl border border-slate-700 text-white">
                    <input type="text" id="mapsInp" placeholder="Link Google Maps" class="md:col-span-2 p-4 bg-slate-800 rounded-xl border border-slate-700 text-white">
                    <textarea id="descInp" placeholder="Descripción breve..." class="md:col-span-2 p-4 bg-slate-800 rounded-xl border border-slate-700 h-24 text-white"></textarea>
                    <button type="submit" id="submitBtn" class="md:col-span-2 bg-blue-600 p-5 rounded-xl font-black uppercase text-white hover:bg-blue-500 transition shadow-lg">Publicar Propiedad</button>
                </form>
            </div>

            <main id="container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10"></main>
        </div>
    </section>

    <footer class="py-16 text-center border-t border-slate-800">
        <p class="text-slate-700 text-[10px] font-bold uppercase tracking-[0.5em]">JKA INMOBILIARIA © 2026</p>
    </footer>

    <script>
        // CONFIGURACIÓN DE URLs
        const SHEET_PROPIEDADES = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQHQf7b5O2BeNcp2h9YQrBYdGiyQ0Z22piNbVoPWUl4mJIEbX-zxCHsxthpQmF3eRTLEgIFXa4lODMK/pub?output=csv';
        const SHEET_USUARIOS = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQHQf7b5O2BeNcp2h9YQrBYdGiyQ0Z22piNbVoPWUl4mJIEbX-zxCHsxthpQmF3eRTLEgIFXa4lODMK/pub?gid=844715514&single=true&output=csv';
        const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycby16-dfSYOhBMP551jDEr1-c6XhTuqhpbT1Wfzg4XA8y1S5Ib8uyoZhGLBQVZuuUveU3g/exec';

        // Lector CSV
        function getRowsFromCSV(text) {
            const rows = []; let curr = []; let field = ''; let inQ = false;
            for (let i = 0; i < text.length; i++) {
                const c = text[i];
                if (c === '"') inQ = !inQ;
                else if (c === ',' && !inQ) { curr.push(field.trim()); field = ''; }
                else if (c === '\n' && !inQ) { curr.push(field.trim()); rows.push(curr); curr = []; field = ''; }
                else if (c !== '\r') field += c;
            }
            if (curr.length || field) { curr.push(field.trim()); rows.push(curr); }
            return rows;
        }

        // Login Admin
        async function revealAdmin() {
            const u = prompt("Usuario:");
            const p = prompt("Contraseña:");
            if (!u || !p) return;
            try {
                const res = await fetch(SHEET_USUARIOS + '&cb=' + Date.now());
                const text = await res.text();
                const users = getRowsFromCSV(text);
                let ok = false;
                for (let i = 1; i < users.length; i++) {
                    if (users[i][0] === u && users[i][2] === p && users[i][3].toLowerCase().includes("admin")) { ok = true; break; }
                }
                if (ok) {
                    document.getElementById('adminPanel').classList.toggle('hidden');
                    document.getElementById('adminPanel').scrollIntoView();
                } else { alert("Credenciales incorrectas."); }
            } catch (e) { alert("Error al validar."); }
        }

        // Cargar Casas
        async function loadHouses() {
            try {
                const res = await fetch(SHEET_PROPIEDADES + '&cb=' + Date.now());
                const text = await res.text();
                const data = getRowsFromCSV(text);
                const container = document.getElementById('container');
                container.innerHTML = "";

                for (let i = 1; i < data.length; i++) {
                    const r = data[i];
                    if (r.length < 11 || (r[11] || "").toLowerCase() !== "disponible") continue;
                    
                    const pFmt = Number(r[6].replace(/[^0-9.]/g, '')).toLocaleString('es-MX');
                    const waMsg = encodeURIComponent(`Hola JKA Inmobiliaria, me interesa la casa en ${r[2]}, ${r[3]}. Precio: $${pFmt}. Avalúo: ${r[7]}. Carta: ${r[8]}.`);

                    container.innerHTML += `
                        <div class="house-card bg-[#1e293b] rounded-[2.5rem] overflow-hidden flex flex-col h-full shadow-2xl text-left border border-slate-800">
                            <img src="${r[1]}" class="h-64 w-full object-cover" loading="lazy">
                            <div class="p-8 flex flex-col flex-grow">
                                <h3 class="text-3xl font-black text-white mb-2">$${pFmt}</h3>
                                <p class="text-slate-400 text-[11px] font-bold mb-4 uppercase italic"><i class="fa-solid fa-location-dot text-blue-500 mr-1"></i> ${r[2]}, ${r[3]}</p>
                                <div class="flex flex-wrap gap-2 mb-6 text-center">
                                    <span class="badge-info">Avalúo: ${r[7] || 'Consultar'}</span>
                                    <span class="badge-info">Carta: ${r[8] || 'Consultar'}</span>
                                </div>
                                <p class="text-slate-500 text-[11px] italic mb-8 line-clamp-4 leading-relaxed">"${r[9]}"</p>
                                <div class="grid gap-3 mt-auto">
                                    <a href="https://wa.me/528115041788?text=${waMsg}" target="_blank" class="bg-[#25D366] text-white py-4 rounded-2xl font-black text-[10px] text-center uppercase shadow-lg hover:bg-green-600 transition">Me interesa</a>
                                    <a href="${r[10]}" target="_blank" class="text-slate-600 text-[9px] text-center uppercase font-bold hover:text-blue-400">Ver Mapa</a>
                                </div>
                            </div>
                        </div>`;
                }
            } catch (e) { console.error(e); }
        }

        // Función de envío a Google Sheets
        document.getElementById('houseForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            btn.innerHTML = "PROCESANDO ENVÍO...";
            btn.disabled = true;

            const payload = {
                imagen: document.getElementById('imgInp').value,
                calle: document.getElementById('streetInp').value,
                colonia: document.getElementById('colInp').value,
                municipio: document.getElementById('munInp').value,
                estado: document.getElementById('estInp').value,
                precio: document.getElementById('priceInp').value,
                avaluo: document.getElementById('avaInp').value,
                carta: document.getElementById('carInp').value,
                descripcion: document.getElementById('descInp').value,
                maps: document.getElementById('mapsInp').value
            };

            fetch(APPS_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            }).then(() => {
                alert("¡DATOS ENVIADOS!\nLa propiedad aparecerá en breve.");
                location.reload();
            }).catch(err => {
                alert("Error de envío.");
                btn.disabled = false;
                btn.innerHTML = "Publicar Propiedad";
            });
        });

        loadHouses();
    </script>
</body>
</html>